TARGET = TimerHeap_test
OBJECTS = TimerHeap_test.o TimerHeap.o EventLoop.o EventLoopThread.o timeUtils.o Channel.o \
            CurrentThread.o Epoll.o Thread.o CountDownLatch.o
CC = g++
CPPFLAGS = -g -Wall -std=c++2a


#vpath %.cpp /home/daydayup/wserber : /home/daydayup/wserber/base
#vpath %.h /home/daydayup/wserber : /home/daydayup/wserber/base

vpath %.cpp ../ : ../base/
vpath %.h ../ : ../base/

$(TARGET) : $(OBJECTS)
	$(CC) -o $@ $(OBJECTS) $(CPPFLAGS)

all : $(OBJECTS)

$(OBJECTS) : %.o : %.cpp %.d
	$(CC) -c $(CPPFLAGS) $< -o $@

%.d : %.cpp
	@set -e; rm -rf $@; \
	$(CC) -MM $(CPPFLAGS) $< > $@.$$$$; \
	sed 's,\($*\)\.o[ :]*,\1.o $@ : ,g' < $@.$$$$ > $@; \
	rm -rf $@.$$$$

SOURCES = $(OBJECTS:.o=.cpp)
DEPENDENCIES = $(SOURCES:.cpp=.d)
-include $(DEPENDENCIES)



.PHONE : clean
clean : 
	-rm -rf $(TARGET) $(OBJECTS) $(DEPENDENCIES)
